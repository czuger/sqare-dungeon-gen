require_relative 'test_helper'

class TestRealCases < Minitest::Test

  def test_real_cases
    j = '{"dungeon_size":5,"rooms_removal_coef":0.3,"entry_room_id":[5,5],"current_room_id":[5,5],"dungeon_generated":true,"rooms":[{"id":[1,1],"entry_room":null,"content":"H","content_description":"The treasure, you find it.","top":1,"left":1,"decorations":[]},{"id":[1,3],"entry_room":null,"content":"T","content_description":"The room contains a pit. Make a perception check against 13. In case of failure the first character takes 13 hp.","top":1,"left":3,"decorations":[]},{"id":[1,4],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":1,"left":4,"decorations":[]},{"id":[2,1],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":2,"left":1,"decorations":[]},{"id":[2,3],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":2,"left":3,"decorations":[]},{"id":[2,4],"entry_room":null,"content":"T","content_description":"The room contains a pit. Make a perception check against 11. In case of failure the first character takes 19 hp.","top":2,"left":4,"decorations":[]},{"id":[3,1],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":3,"left":1,"decorations":[{"decoration_type":"four_columns","decoration_data":[{"top":2,"left":2},{"top":2,"left":8},{"top":8,"left":2},{"top":8,"left":8}]}]},{"id":[3,2],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":3,"left":2,"decorations":[]},{"id":[3,4],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":3,"left":4,"decorations":[{"decoration_type":"four_columns","decoration_data":[{"top":2,"left":2},{"top":2,"left":8},{"top":8,"left":2},{"top":8,"left":8}]}]},{"id":[4,2],"entry_room":null,"content":"T","content_description":"The room contains a pit. Make a perception check against 14. In case of failure the first character takes 17 hp.","top":4,"left":2,"decorations":[]},{"id":[4,4],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":4,"left":4,"decorations":[{"decoration_type":"four_columns","decoration_data":[{"top":2,"left":2},{"top":2,"left":8},{"top":8,"left":2},{"top":8,"left":8}]}]},{"id":[4,5],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":4,"left":5,"decorations":[]},{"id":[5,1],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":5,"left":1,"decorations":[{"decoration_type":"four_columns","decoration_data":[{"top":2,"left":2},{"top":2,"left":8},{"top":8,"left":2},{"top":8,"left":8}]}]},{"id":[5,2],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":5,"left":2,"decorations":[]},{"id":[5,3],"entry_room":null,"content":"M","content_description":"2 Skeleton.","top":5,"left":3,"decorations":[]},{"id":[5,4],"entry_room":null,"content":null,"content_description":"Nothing in this room.","top":5,"left":4,"decorations":[]},{"id":[5,5],"entry_room":true,"content":"E","content_description":"This room is the entry room.","top":5,"left":5,"decorations":[]}],"hallways":[{"hallway_id":[[1,1],[2,1]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[1,1]},{"hallway_id":[[1,3],[1,4]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[1,3]},{"hallway_id":[[1,3],[2,3]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[1,3]},{"hallway_id":[[1,4],[2,4]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[1,4]},{"hallway_id":[[2,1],[3,1]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[2,1]},{"hallway_id":[[2,3],[2,4]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[2,3]},{"hallway_id":[[2,4],[3,4]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[2,4]},{"hallway_id":[[3,1],[3,2]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[3,1]},{"hallway_id":[[3,2],[4,2]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[3,2]},{"hallway_id":[[3,4],[4,4]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[3,4]},{"hallway_id":[[4,2],[5,2]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[4,2]},{"hallway_id":[[4,4],[4,5]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[4,4]},{"hallway_id":[[4,4],[5,4]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[4,4]},{"hallway_id":[[4,5],[5,5]],"klass":"VerticalHallway","disabled":false,"draw_base_room":[4,5]},{"hallway_id":[[5,1],[5,2]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[5,1]},{"hallway_id":[[5,2],[5,3]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[5,2]},{"hallway_id":[[5,3],[5,4]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[5,3]},{"hallway_id":[[5,4],[5,5]],"klass":"HorizontalHallway","disabled":false,"draw_base_room":[5,4]}],"lair":{"encounter_level":"medium","hero_levels":[1,1,1],"lair_type":"mythical_undead"}}'
    d = Dungeon.from_json( j )

    d.set_next_room( :top )
  end

end